# é¡¹ç›®ç»“æ„è¯´æ˜

## ğŸ“ å®Œæ•´ç›®å½•ç»“æ„

```
sgs/                                    # é¡¹ç›®æ ¹ç›®å½•
â”œâ”€â”€ README.md                           # é¡¹ç›®ä¸»æ–‡æ¡£
â”œâ”€â”€ QUICKSTART.md                       # å¿«é€Ÿå¯åŠ¨æŒ‡å—
â”œâ”€â”€ DEPLOYMENT.md                       # éƒ¨ç½²æ–‡æ¡£
â”œâ”€â”€ PROJECT_STRUCTURE.md                # æœ¬æ–‡ä»¶
â”œâ”€â”€ .gitignore                          # Git å¿½ç•¥æ–‡ä»¶
â”œâ”€â”€ game_design_utf8.txt                # æ¸¸æˆè®¾è®¡æ–‡æ¡£
â”‚
â”œâ”€â”€ server/                             # Go åç«¯æœåŠ¡å™¨
â”‚   â”œâ”€â”€ go.mod                          # Go æ¨¡å—å®šä¹‰
â”‚   â”œâ”€â”€ go.sum                          # Go ä¾èµ–æ ¡éªŒ
â”‚   â”œâ”€â”€ Makefile                        # æ„å»ºè„šæœ¬
â”‚   â”œâ”€â”€ Dockerfile                      # Docker é•œåƒé…ç½®
â”‚   â”œâ”€â”€ docker-compose.yml              # Docker Compose é…ç½®
â”‚   â”œâ”€â”€ .gitignore                      # æœåŠ¡å™¨ Git å¿½ç•¥
â”‚   â”‚
â”‚   â”œâ”€â”€ cmd/                            # ç¨‹åºå…¥å£
â”‚   â”‚   â””â”€â”€ server/
â”‚   â”‚       â””â”€â”€ main.go                 # æœåŠ¡å™¨ä¸»ç¨‹åº
â”‚   â”‚
â”‚   â”œâ”€â”€ internal/                       # å†…éƒ¨ä¸šåŠ¡é€»è¾‘
â”‚   â”‚   â”œâ”€â”€ config/                     # é…ç½®ç®¡ç†
â”‚   â”‚   â”‚   â””â”€â”€ config.go               # é…ç½®åŠ è½½
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ database/                   # æ•°æ®åº“
â”‚   â”‚   â”‚   â”œâ”€â”€ database.go             # æ•°æ®åº“åˆå§‹åŒ–
â”‚   â”‚   â”‚   â””â”€â”€ models.go               # æ•°æ®åº“æ¨¡å‹
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ models/                     # ä¸šåŠ¡æ¨¡å‹
â”‚   â”‚   â”‚   â””â”€â”€ game_models.go          # æ¸¸æˆæ•°æ®æ¨¡å‹
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ game/                       # æ¸¸æˆæ ¸å¿ƒé€»è¾‘
â”‚   â”‚   â”‚   â”œâ”€â”€ game_manager.go         # æ¸¸æˆç®¡ç†å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ room.go                 # æˆ¿é—´ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ matchmaking.go          # åŒ¹é…ç³»ç»Ÿ
â”‚   â”‚   â”‚   â””â”€â”€ game_logic.go           # æ¸¸æˆé€»è¾‘
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ router/                     # è·¯ç”±
â”‚   â”‚   â”‚   â””â”€â”€ router.go               # è·¯ç”±é…ç½®
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ handler/                    # HTTP å¤„ç†å™¨
â”‚   â”‚       â”œâ”€â”€ auth_handler.go         # è®¤è¯å¤„ç†
â”‚   â”‚       â”œâ”€â”€ room_handler.go         # æˆ¿é—´å¤„ç†
â”‚   â”‚       â”œâ”€â”€ player_handler.go       # ç©å®¶å¤„ç†
â”‚   â”‚       â”œâ”€â”€ match_handler.go        # åŒ¹é…å¤„ç†
â”‚   â”‚       â”œâ”€â”€ data_handler.go         # æ•°æ®å¤„ç†
â”‚   â”‚       â””â”€â”€ websocket_handler.go    # WebSocket å¤„ç†
â”‚   â”‚
â”‚   â”œâ”€â”€ pkg/                            # å…¬å…±åŒ…
â”‚   â”‚   â””â”€â”€ logger/                     # æ—¥å¿—
â”‚   â”‚       â””â”€â”€ logger.go               # æ—¥å¿—å·¥å…·
â”‚   â”‚
â”‚   â”œâ”€â”€ config/                         # é…ç½®æ–‡ä»¶
â”‚   â”‚   â””â”€â”€ config.example.yaml         # é…ç½®æ¨¡æ¿
â”‚   â”‚
â”‚   â””â”€â”€ scripts/                        # è„šæœ¬
â”‚       â””â”€â”€ init_data.sql               # æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬
â”‚
â””â”€â”€ client/                             # Unity å®¢æˆ·ç«¯
    â”œâ”€â”€ README.md                       # å®¢æˆ·ç«¯æ–‡æ¡£
    â”‚
    â””â”€â”€ Assets/                         # Unity èµ„æº
        â”œâ”€â”€ Scripts/                    # C# è„šæœ¬
        â”‚   â”œâ”€â”€ Network/                # ç½‘ç»œé€šä¿¡
        â”‚   â”‚   â”œâ”€â”€ NetworkManager.cs   # WebSocket ç®¡ç†
        â”‚   â”‚   â””â”€â”€ ApiClient.cs        # HTTP API å®¢æˆ·ç«¯
        â”‚   â”‚
        â”‚   â”œâ”€â”€ Game/                   # æ¸¸æˆé€»è¾‘
        â”‚   â”‚   â”œâ”€â”€ GameManager.cs      # æ¸¸æˆç®¡ç†å™¨
        â”‚   â”‚   â”œâ”€â”€ BoardManager.cs     # æ£‹ç›˜ç®¡ç†
        â”‚   â”‚   â”œâ”€â”€ CardManager.cs      # å¡ç‰Œç®¡ç†
        â”‚   â”‚   â”œâ”€â”€ GeneralController.cs # æ­¦å°†æ§åˆ¶å™¨
        â”‚   â”‚   â””â”€â”€ TerrainController.cs # åœ°å½¢æ§åˆ¶å™¨
        â”‚   â”‚
        â”‚   â”œâ”€â”€ UI/                     # ç”¨æˆ·ç•Œé¢
        â”‚   â”‚   â””â”€â”€ UIManager.cs        # UI ç®¡ç†å™¨
        â”‚   â”‚
        â”‚   â””â”€â”€ Steam/                  # Steam é›†æˆ
        â”‚       â””â”€â”€ SteamManager.cs     # Steam ç®¡ç†å™¨
        â”‚
        â”œâ”€â”€ Scenes/                     # æ¸¸æˆåœºæ™¯
        â”‚   â”œâ”€â”€ MainMenu.unity          # ä¸»èœå•åœºæ™¯
        â”‚   â”œâ”€â”€ GameScene.unity         # æ¸¸æˆåœºæ™¯
        â”‚   â””â”€â”€ RoomList.unity          # æˆ¿é—´åˆ—è¡¨åœºæ™¯
        â”‚
        â”œâ”€â”€ Prefabs/                    # é¢„åˆ¶ä½“
        â”‚   â”œâ”€â”€ General.prefab          # æ­¦å°†é¢„åˆ¶ä½“
        â”‚   â”œâ”€â”€ Terrain.prefab          # åœ°å½¢é¢„åˆ¶ä½“
        â”‚   â”œâ”€â”€ Card.prefab             # å¡ç‰Œé¢„åˆ¶ä½“
        â”‚   â””â”€â”€ Tile.prefab             # æ ¼å­é¢„åˆ¶ä½“
        â”‚
        â”œâ”€â”€ Materials/                  # æè´¨
        â”œâ”€â”€ Textures/                   # è´´å›¾
        â”œâ”€â”€ Plugins/                    # æ’ä»¶
        â”‚   â””â”€â”€ Steamworks.NET/         # Steam API
        â””â”€â”€ Resources/                  # èµ„æº
            â”œâ”€â”€ Generals/               # æ­¦å°†èµ„æº
            â”œâ”€â”€ Terrains/               # åœ°å½¢èµ„æº
            â””â”€â”€ Cards/                  # å¡ç‰Œèµ„æº
```

## ğŸ—ï¸ æ¶æ„è¯´æ˜

### æœåŠ¡å™¨æ¶æ„ï¼ˆGoï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      å®¢æˆ·ç«¯ (Unity)                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â–²
                          â”‚ HTTP / WebSocket
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   API Gateway (Gin)                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚  Auth    â”‚  Room    â”‚  Match   â”‚  Data    â”‚         â”‚
â”‚  â”‚ Handler  â”‚ Handler  â”‚ Handler  â”‚ Handler  â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â–²
                          â”‚
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Game Manager                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚  Room    â”‚ Matching â”‚  Game    â”‚  Player  â”‚         â”‚
â”‚  â”‚ Manager  â”‚  Queue   â”‚  Logic   â”‚ Manager  â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â–²
                          â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â–¼                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      MySQL          â”‚     â”‚      Redis          â”‚
â”‚  - ç©å®¶æ•°æ®         â”‚     â”‚  - ä¼šè¯ç¼“å­˜         â”‚
â”‚  - æ­¦å°†é…ç½®         â”‚     â”‚  - åŒ¹é…é˜Ÿåˆ—         â”‚
â”‚  - åœ°å½¢é…ç½®         â”‚     â”‚  - å®æ—¶æ•°æ®         â”‚
â”‚  - æ¸¸æˆè®°å½•         â”‚     â”‚  - æ’è¡Œæ¦œ           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å®¢æˆ·ç«¯æ¶æ„ï¼ˆUnityï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     UI Layer                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚ MainMenu â”‚  Game UI â”‚ RoomList â”‚ Settings â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â–²
                          â”‚
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Game Logic Layer                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚  Game    â”‚  Board   â”‚  Card    â”‚  Input   â”‚         â”‚
â”‚  â”‚ Manager  â”‚ Manager  â”‚ Manager  â”‚ Manager  â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â–²
                          â”‚
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Network Layer                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚  NetworkManager  â”‚    ApiClient     â”‚               â”‚
â”‚  â”‚   (WebSocket)    â”‚     (HTTP)       â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â–²
                          â”‚
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Presentation Layer                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚ General  â”‚ Terrain  â”‚   Card   â”‚   UI     â”‚         â”‚
â”‚  â”‚  Prefab  â”‚  Prefab  â”‚  Prefab  â”‚ Element  â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ æ•°æ®æµ

### æ¸¸æˆæ“ä½œæµç¨‹

```
Client                    Server                    Database
  â”‚                         â”‚                          â”‚
  â”‚  1. Play Card          â”‚                          â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                          â”‚
  â”‚                         â”‚                          â”‚
  â”‚                         â”‚  2. Validate            â”‚
  â”‚                         â”‚<â”€â”€â”€â”€â”€â”€â”€Game Logicâ”€â”€â”€â”€â”€â”€â”€>â”‚
  â”‚                         â”‚                          â”‚
  â”‚  3. Update Response    â”‚                          â”‚
  â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                          â”‚
  â”‚                         â”‚                          â”‚
  â”‚  4. Broadcast Update   â”‚                          â”‚
  â”‚<â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•— â”‚                          â”‚
  â”‚                       â•‘ â”‚                          â”‚
Other Clients           â•‘ â”‚                          â”‚
  â”‚<â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚                          â”‚
  â”‚                         â”‚                          â”‚
  â”‚                         â”‚  5. Save Game State     â”‚
  â”‚                         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
  â”‚                         â”‚                          â”‚
```

### è®¤è¯æµç¨‹

```
Client                    Server                    Database
  â”‚                         â”‚                          â”‚
  â”‚  1. Login Request      â”‚                          â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                          â”‚
  â”‚                         â”‚                          â”‚
  â”‚                         â”‚  2. Query User          â”‚
  â”‚                         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
  â”‚                         â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚                         â”‚                          â”‚
  â”‚                         â”‚  3. Verify Password     â”‚
  â”‚                         â”‚     Generate JWT        â”‚
  â”‚                         â”‚                          â”‚
  â”‚  4. JWT Token          â”‚                          â”‚
  â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                          â”‚
  â”‚                         â”‚                          â”‚
  â”‚  5. Subsequent Requests â”‚                          â”‚
  â”‚  (with JWT in header)   â”‚                          â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                          â”‚
  â”‚                         â”‚                          â”‚
```

## ğŸ’¾ æ•°æ®æ¨¡å‹

### æ ¸å¿ƒæ•°æ®è¡¨

```sql
-- ç©å®¶è¡¨
players (
    id UUID PRIMARY KEY,
    username VARCHAR,
    email VARCHAR,
    password_hash VARCHAR,
    level INT,
    coins INT,
    rank INT
)

-- æ­¦å°†è¡¨
generals (
    id UUID PRIMARY KEY,
    name VARCHAR,
    faction VARCHAR,  -- é­/èœ€/å´/ç¾¤
    role VARCHAR,     -- è¾“å‡º/æ§åˆ¶/è¾…åŠ©
    hp INT,
    skills_json JSONB
)

-- åœ°å½¢è¡¨
terrains (
    id UUID PRIMARY KEY,
    name VARCHAR,
    type VARCHAR,      -- åŸºç¡€/äº‹ä»¶/äº¤äº’
    category VARCHAR,  -- å±±åœ°/å¹³åŸ/æ²³æµ
    effects_json JSONB
)

-- æˆ¿é—´è¡¨
rooms (
    id UUID PRIMARY KEY,
    host_id UUID,
    status VARCHAR,    -- waiting/playing/finished
    config_json JSONB
)

-- æ¸¸æˆè®°å½•è¡¨
game_histories (
    id UUID PRIMARY KEY,
    room_id UUID,
    winner_team VARCHAR,
    duration INT,
    players_json JSONB
)
```

## ğŸ”Œ API æ¥å£

### RESTful API

```
è®¤è¯
POST   /api/v1/auth/register      # æ³¨å†Œ
POST   /api/v1/auth/login         # ç™»å½•
POST   /api/v1/auth/steam-auth    # Steamè®¤è¯

ç©å®¶
GET    /api/v1/player/profile     # è·å–èµ„æ–™
PUT    /api/v1/player/profile     # æ›´æ–°èµ„æ–™
GET    /api/v1/player/stats       # è·å–ç»Ÿè®¡

æˆ¿é—´
GET    /api/v1/room/list          # æˆ¿é—´åˆ—è¡¨
POST   /api/v1/room/create        # åˆ›å»ºæˆ¿é—´
POST   /api/v1/room/:id/join      # åŠ å…¥æˆ¿é—´
POST   /api/v1/room/:id/leave     # ç¦»å¼€æˆ¿é—´
POST   /api/v1/room/:id/start     # å¼€å§‹æ¸¸æˆ

åŒ¹é…
POST   /api/v1/match/join         # åŠ å…¥åŒ¹é…
POST   /api/v1/match/leave        # ç¦»å¼€åŒ¹é…

æ•°æ®
GET    /api/v1/data/generals      # æ­¦å°†æ•°æ®
GET    /api/v1/data/terrains      # åœ°å½¢æ•°æ®
```

### WebSocket æ¶ˆæ¯

```javascript
// å®¢æˆ·ç«¯ -> æœåŠ¡å™¨
{
  "type": "game_action",
  "room_id": "uuid",
  "data": {
    "action_type": "play_card",
    "card_id": "uuid",
    "target_ids": ["uuid"]
  }
}

// æœåŠ¡å™¨ -> å®¢æˆ·ç«¯
{
  "type": "game_state_update",
  "room_id": "uuid",
  "data": {
    "round": 3,
    "phase": "combat",
    "players": [...],
    "terrains": {...}
  }
}
```

## ğŸ¨ èµ„æºå‘½åè§„èŒƒ

### æœåŠ¡å™¨ç«¯

- æ–‡ä»¶åï¼š`snake_case.go`
- åŒ…åï¼š`package`
- ç±»å‹ï¼š`PascalCase`
- å‡½æ•°ï¼š`PascalCase` (å…¬å¼€) / `camelCase` (ç§æœ‰)
- å¸¸é‡ï¼š`UPPER_SNAKE_CASE`

### å®¢æˆ·ç«¯

- æ–‡ä»¶åï¼š`PascalCase.cs`
- ç±»åï¼š`PascalCase`
- æ–¹æ³•ï¼š`PascalCase` (å…¬å¼€) / `PascalCase` (ç§æœ‰)
- å˜é‡ï¼š`camelCase`
- å¸¸é‡ï¼š`PascalCase`

### Unity èµ„æº

- åœºæ™¯ï¼š`PascalCase.unity`
- é¢„åˆ¶ä½“ï¼š`PascalCase.prefab`
- æè´¨ï¼š`Material_Name.mat`
- è´´å›¾ï¼š`texture_name.png`

## ğŸ“¦ éƒ¨ç½²ç»“æ„

### Docker å®¹å™¨

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              â”‚     â”‚              â”‚     â”‚              â”‚
â”‚    MySQL     â”‚â”€â”€â”€â”€â–¶â”‚    Server    â”‚â—€â”€â”€â”€â”€â”‚    Redis     â”‚
â”‚  Container   â”‚     â”‚  Container   â”‚     â”‚  Container   â”‚
â”‚              â”‚     â”‚              â”‚     â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      :3306               :8080                :6379
```

### Steam å‘å¸ƒç»“æ„

```
SanguoStrategy/
â”œâ”€â”€ Windows/
â”‚   â”œâ”€â”€ SanguoStrategy.exe
â”‚   â”œâ”€â”€ steam_api64.dll
â”‚   â””â”€â”€ ...
â”œâ”€â”€ macOS/
â”‚   â””â”€â”€ SanguoStrategy.app
â””â”€â”€ Linux/
    â”œâ”€â”€ SanguoStrategy.x86_64
    â”œâ”€â”€ libsteam_api.so
    â””â”€â”€ ...
```

## ğŸ” å®‰å…¨è€ƒè™‘

1. **å¯†ç åŠ å¯†**ï¼šä½¿ç”¨ bcrypt
2. **JWT è®¤è¯**ï¼šæœ‰æ•ˆæœŸ 7 å¤©
3. **WebSocket è®¤è¯**ï¼šé€šè¿‡ token éªŒè¯
4. **SQL æ³¨å…¥é˜²æŠ¤**ï¼šä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢
5. **XSS é˜²æŠ¤**ï¼šè¾“å…¥éªŒè¯å’Œè¾“å‡ºè½¬ä¹‰
6. **CORS é…ç½®**ï¼šé™åˆ¶å…è®¸çš„æº

## ğŸ“š æŠ€æœ¯æ ˆæ€»ç»“

### åç«¯
- **è¯­è¨€**ï¼šGo 1.21
- **æ¡†æ¶**ï¼šGin
- **æ•°æ®åº“**ï¼šMySQL 8.0
- **ç¼“å­˜**ï¼šRedis 7
- **WebSocket**ï¼šgorilla/websocket
- **ORM**ï¼šGORM

### å‰ç«¯
- **å¼•æ“**ï¼šUnity 2021.3 LTS
- **è¯­è¨€**ï¼šC# .NET 4.8
- **ç½‘ç»œ**ï¼šWebSocketSharp
- **JSON**ï¼šNewtonsoft.Json
- **Steam**ï¼šSteamworks.NET

### éƒ¨ç½²
- **å®¹å™¨**ï¼šDocker & Docker Compose
- **CI/CD**ï¼šGitHub Actions (å¾…æ·»åŠ )
- **ç›‘æ§**ï¼šPrometheus + Grafana (å¾…æ·»åŠ )

---

*é¡¹ç›®æŒç»­æ›´æ–°ä¸­...*

