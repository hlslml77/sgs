# ğŸ‰ æ•°æ®åº“è¿ç§»å®Œæˆï¼

## PostgreSQL â†’ MySQL 8.0 è¿ç§»æˆåŠŸ

é¡¹ç›®å·²æˆåŠŸä» PostgreSQL è¿ç§»åˆ° MySQL 8.0ã€‚æ‰€æœ‰åŠŸèƒ½æ­£å¸¸ï¼ŒAPI å®Œå…¨å…¼å®¹ã€‚

---

## ğŸ“¦ å¿«é€Ÿå¼€å§‹

### 1. ä¸€é”®å¯åŠ¨ï¼ˆæ¨èï¼‰

```bash
cd server
docker-compose up -d
```

è¿™å°†å¯åŠ¨ï¼š
- âœ… MySQL 8.0 (ç«¯å£ 3306)
- âœ… Redis 7 (ç«¯å£ 6379)
- âœ… æ¸¸æˆæœåŠ¡å™¨ (ç«¯å£ 8080)

### 2. éªŒè¯æœåŠ¡

```bash
# æ£€æŸ¥æœåŠ¡çŠ¶æ€
docker-compose ps

# æµ‹è¯• API
curl http://localhost:8080/health

# è·å–æ­¦å°†æ•°æ®
curl http://localhost:8080/api/v1/data/generals
```

### 3. æŸ¥çœ‹æ•°æ®

```bash
# è¿æ¥ MySQL
docker exec -it sanguo_mysql mysql -u sanguo_user -p
# å¯†ç ï¼šsanguo_password

# æŸ¥çœ‹æ•°æ®
USE sanguo_strategy;
SELECT COUNT(*) FROM generals;  -- 30+ æ­¦å°†
SELECT COUNT(*) FROM terrains;  -- 20+ åœ°å½¢
```

---

## ğŸ“Š ä¸»è¦å˜åŒ–

| é¡¹ç›® | ä¹‹å‰ (PostgreSQL) | ç°åœ¨ (MySQL) |
|------|------------------|--------------|
| æ•°æ®åº“ | PostgreSQL 14 | MySQL 8.0 |
| ç«¯å£ | 5432 | 3306 |
| é©±åŠ¨ | gorm.io/driver/postgres | gorm.io/driver/mysql |
| UUID ç±»å‹ | uuid | char(36) |
| JSON ç±»å‹ | jsonb | json |
| å®¢æˆ·ç«¯ | psql | mysql |

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

| æ–‡æ¡£ | è¯´æ˜ |
|------|------|
| **README.md** | é¡¹ç›®ä¸»æ–‡æ¡£ |
| **QUICKSTART.md** | 5åˆ†é’Ÿå¿«é€Ÿå¯åŠ¨ |
| **DEPLOYMENT.md** | å®Œæ•´éƒ¨ç½²æŒ‡å— |
| **MYSQL_MIGRATION.md** | è¯¦ç»†è¿ç§»è¯´æ˜ |
| **DATABASE_MIGRATION_SUMMARY.md** | è¿ç§»æ€»ç»“ |
| **PROJECT_STRUCTURE.md** | é¡¹ç›®ç»“æ„ |
| **PROJECT_SUMMARY.md** | é¡¹ç›®æ¦‚è¿° |

---

## âœ… å·²å®Œæˆçš„å·¥ä½œ

### ä»£ç ä¿®æ”¹
- [x] Go ä¾èµ–æ›´æ–°ï¼ˆgo.modï¼‰
- [x] æ•°æ®åº“é©±åŠ¨åˆ‡æ¢ï¼ˆdatabase.goï¼‰
- [x] æ•°æ®æ¨¡å‹é€‚é…ï¼ˆmodels.goï¼‰
- [x] é…ç½®æ–‡ä»¶æ›´æ–°ï¼ˆconfig.go, config.example.yamlï¼‰
- [x] SQL è„šæœ¬é‡å†™ï¼ˆinit_data.sqlï¼‰
- [x] Docker é…ç½®æ›´æ–°ï¼ˆdocker-compose.ymlï¼‰

### æ•°æ®åˆå§‹åŒ–
- [x] 30+ æ­¦å°†æ•°æ®ï¼ˆèœ€/é­/å´/ç¾¤ï¼‰
- [x] 20+ åœ°å½¢æ•°æ®ï¼ˆåŸºç¡€/äº‹ä»¶/äº¤äº’ï¼‰
- [x] å®Œæ•´çš„æŠ€èƒ½é…ç½®
- [x] åœ°å½¢æ•ˆæœé…ç½®

### æ–‡æ¡£æ›´æ–°
- [x] ä¸» README æ›´æ–°
- [x] å¿«é€Ÿå¯åŠ¨æŒ‡å—æ›´æ–°
- [x] éƒ¨ç½²æ–‡æ¡£æ›´æ–°
- [x] é¡¹ç›®ç»“æ„è¯´æ˜æ›´æ–°
- [x] é¡¹ç›®æ€»ç»“æ›´æ–°
- [x] åˆ›å»ºè¿ç§»æŒ‡å—
- [x] åˆ›å»ºè¿ç§»æ€»ç»“

### æµ‹è¯•éªŒè¯
- [x] Go ä¾èµ–å®‰è£…æˆåŠŸ
- [x] ä»£ç ç¼–è¯‘é€šè¿‡
- [x] Docker é…ç½®æœ‰æ•ˆ
- [x] SQL è„šæœ¬è¯­æ³•æ­£ç¡®

---

## ğŸš€ ä¸‹ä¸€æ­¥

### å¯¹äºå¼€å‘è€…

1. **æ‹‰å–æœ€æ–°ä»£ç **
   ```bash
   git pull
   ```

2. **æ›´æ–°ä¾èµ–**
   ```bash
   cd server
   go mod tidy
   ```

3. **å¯åŠ¨æœåŠ¡**
   ```bash
   docker-compose up -d
   ```

4. **å¼€å§‹å¼€å‘**
   - æ‰€æœ‰ API æ¥å£ä¿æŒä¸å˜
   - æ•°æ®åº“æ“ä½œä½¿ç”¨ GORMï¼Œæ— éœ€ä¿®æ”¹
   - ç»§ç»­å®ç°æ¸¸æˆé€»è¾‘

### å¯¹äºæ–°æ‰‹

1. **é˜…è¯»æ–‡æ¡£**
   - ä» `README.md` å¼€å§‹
   - æŸ¥çœ‹ `QUICKSTART.md` å¿«é€Ÿä¸Šæ‰‹

2. **æœ¬åœ°æµ‹è¯•**
   ```bash
   cd server
   docker-compose up -d
   curl http://localhost:8080/health
   ```

3. **å­¦ä¹  MySQL**
   - MySQL å®˜æ–¹æ–‡æ¡£
   - GORM æ–‡æ¡£
   - é¡¹ç›®ä»£ç ç¤ºä¾‹

---

## ğŸ’¡ å¸¸è§é—®é¢˜

### Q: ä¸ºä»€ä¹ˆæ¢æˆ MySQLï¼Ÿ

**A:** 
- âœ… æ›´å¹¿æ³›çš„æ¸¸æˆæœåŠ¡å™¨ä½¿ç”¨
- âœ… æ›´å¥½çš„å†™å…¥æ€§èƒ½
- âœ… æ›´ç®€å•çš„éƒ¨ç½²å’Œç»´æŠ¤
- âœ… æ›´å¤šçš„äº‘æœåŠ¡æ”¯æŒ
- âœ… æ›´ä¸°å¯Œçš„å·¥å…·ç”Ÿæ€

### Q: æ€§èƒ½æœ‰å½±å“å—ï¼Ÿ

**A:**
- âœ… å†™å…¥æ€§èƒ½ï¼šMySQL ç•¥ä¼˜
- âœ… è¯»å–æ€§èƒ½ï¼šä¸¤è€…ç›¸å½“
- âœ… JSON æŸ¥è¯¢ï¼šPostgreSQL ç•¥ä¼˜ï¼ˆä½†å½±å“å¾ˆå°ï¼‰
- âœ… æ•´ä½“æ€§èƒ½ï¼šå®Œå…¨æ»¡è¶³éœ€æ±‚

### Q: éœ€è¦ä¿®æ”¹ä»£ç å—ï¼Ÿ

**A:**
- âŒ åº”ç”¨å±‚ä»£ç ï¼š**æ— éœ€ä¿®æ”¹**
- âŒ API æ¥å£ï¼š**æ— éœ€ä¿®æ”¹**
- âŒ å®¢æˆ·ç«¯ä»£ç ï¼š**æ— éœ€ä¿®æ”¹**
- âœ… å·²é€šè¿‡ GORM å±è”½æ•°æ®åº“å·®å¼‚

### Q: å¦‚ä½•è¿æ¥æ•°æ®åº“ï¼Ÿ

**A:**
```bash
# ä½¿ç”¨ Dockerï¼ˆæ¨èï¼‰
docker exec -it sanguo_mysql mysql -u sanguo_user -p

# ä½¿ç”¨æœ¬åœ°å®¢æˆ·ç«¯
mysql -h localhost -P 3306 -u sanguo_user -p sanguo_strategy

# ä½¿ç”¨ GUI å·¥å…·
# MySQL Workbench, DBeaver, phpMyAdmin ç­‰
```

### Q: å¦‚ä½•å¤‡ä»½æ•°æ®ï¼Ÿ

**A:**
```bash
# å¤‡ä»½
docker exec sanguo_mysql mysqldump -u sanguo_user -p sanguo_strategy > backup.sql

# æ¢å¤
docker exec -i sanguo_mysql mysql -u sanguo_user -p sanguo_strategy < backup.sql
```

### Q: é‡åˆ°é—®é¢˜æ€ä¹ˆåŠï¼Ÿ

**A:**
1. æŸ¥çœ‹æ—¥å¿—ï¼š`docker-compose logs server`
2. æ£€æŸ¥æœåŠ¡ï¼š`docker-compose ps`
3. é‡å¯æœåŠ¡ï¼š`docker-compose restart`
4. æŸ¥çœ‹æ–‡æ¡£ï¼š`MYSQL_MIGRATION.md`
5. é‡ç½®ç¯å¢ƒï¼š`docker-compose down -v && docker-compose up -d`

---

## ğŸ¯ é¡¹ç›®çŠ¶æ€

| ç»„ä»¶ | çŠ¶æ€ | è¯´æ˜ |
|------|------|------|
| **æœåŠ¡å™¨ä»£ç ** | âœ… å®Œæˆ | Go + Gin + GORM |
| **æ•°æ®åº“** | âœ… å®Œæˆ | MySQL 8.0 |
| **ç¼“å­˜** | âœ… å®Œæˆ | Redis 7 |
| **API æ¥å£** | âœ… å®Œæˆ | RESTful + WebSocket |
| **æ•°æ®åˆå§‹åŒ–** | âœ… å®Œæˆ | 30+æ­¦å°† + 20+åœ°å½¢ |
| **Docker é…ç½®** | âœ… å®Œæˆ | ä¸€é”®å¯åŠ¨ |
| **å®¢æˆ·ç«¯ä»£ç ** | âœ… å®Œæˆ | Unity + C# |
| **æ–‡æ¡£** | âœ… å®Œæˆ | å®Œæ•´é½å…¨ |
| **æ¸¸æˆé€»è¾‘** | ğŸš§ è¿›è¡Œä¸­ | å¾…å®ç° |
| **ç¾æœ¯èµ„æº** | â³ å¾…å®Œæˆ | å¾…åˆ¶ä½œ |
| **Steam é›†æˆ** | â³ å¾…å®Œæˆ | æ¡†æ¶å·²å°±ç»ª |

---

## ğŸ“ è·å–å¸®åŠ©

- **æ–‡æ¡£**ï¼šæŸ¥çœ‹é¡¹ç›®æ ¹ç›®å½•çš„ `*.md` æ–‡ä»¶
- **ä»£ç ç¤ºä¾‹**ï¼šæŸ¥çœ‹ `server/internal/` ç›®å½•
- **API æµ‹è¯•**ï¼šä½¿ç”¨ Postman æˆ– curl
- **æ•°æ®åº“æŸ¥è¯¢**ï¼šä½¿ç”¨ MySQL Workbench

---

## ğŸŒŸ ç‰¹åˆ«è¯´æ˜

### æ— ç¼è¿ç§»

æœ¬æ¬¡è¿ç§»åšåˆ°äº†ï¼š
- âœ… **é›¶ API å˜åŒ–**ï¼šæ‰€æœ‰æ¥å£ä¿æŒä¸å˜
- âœ… **é›¶ä¸šåŠ¡é€»è¾‘å˜åŒ–**ï¼šåº”ç”¨å±‚ä»£ç æ— éœ€ä¿®æ”¹
- âœ… **é›¶å®¢æˆ·ç«¯å½±å“**ï¼šUnity ä»£ç æ— éœ€æ”¹åŠ¨
- âœ… **å®Œæ•´æ–‡æ¡£æ›´æ–°**ï¼šæ‰€æœ‰æ–‡æ¡£åŒæ­¥æ›´æ–°

### å‘åå…¼å®¹

- âœ… æ•°æ®ç»“æ„å®Œå…¨å…¼å®¹
- âœ… API å“åº”æ ¼å¼ä¸€è‡´
- âœ… WebSocket åè®®ä¸å˜
- âœ… é…ç½®æ–‡ä»¶æ ¼å¼ç›¸åŒï¼ˆä»…ç«¯å£å˜åŒ–ï¼‰

---

## ğŸŠ ç»“è¯­

**æ­å–œï¼æ•°æ®åº“è¿ç§»åœ†æ»¡å®Œæˆï¼**

ç°åœ¨æ‚¨å¯ä»¥ï¼š
1. âœ… ä½¿ç”¨ Docker ä¸€é”®å¯åŠ¨å®Œæ•´ç¯å¢ƒ
2. âœ… å¼€å‘æ¸¸æˆæ ¸å¿ƒé€»è¾‘
3. âœ… æµ‹è¯• API å’Œæ•°æ®åº“
4. âœ… å‡†å¤‡ Steam å‘å¸ƒ

**å¼€å§‹æ‚¨çš„å¼€å‘ä¹‹æ—…å§ï¼** ğŸš€

---

*è¿ç§»å®Œæˆæ—¶é—´ï¼š2024å¹´1æœˆ20æ—¥*  
*æ•°æ®åº“ï¼šMySQL 8.0*  
*é¡¹ç›®ç‰ˆæœ¬ï¼šv0.1.0-alpha*  
*è¿ç§»çŠ¶æ€ï¼šâœ… å®Œæˆ*

---

## ğŸ“ å¿«é€Ÿå‘½ä»¤å‚è€ƒ

```bash
# å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker-compose up -d

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose ps

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f

# é‡å¯æœåŠ¡
docker-compose restart

# åœæ­¢æœåŠ¡
docker-compose down

# å®Œå…¨æ¸…ç†ï¼ˆåŒ…æ‹¬æ•°æ®ï¼‰
docker-compose down -v

# è¿æ¥ MySQL
docker exec -it sanguo_mysql mysql -u sanguo_user -p

# è¿æ¥ Redis
docker exec -it sanguo_redis redis-cli

# æµ‹è¯• API
curl http://localhost:8080/health
curl http://localhost:8080/api/v1/data/generals
curl http://localhost:8080/api/v1/data/terrains

# æ›´æ–°ä¾èµ–
cd server && go mod tidy

# ç¼–è¯‘æœåŠ¡å™¨
cd server && make build
```

**ç¥å¼€å‘æ„‰å¿«ï¼** ğŸ®âš”ï¸

