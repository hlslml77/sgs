# 游戏场景说明

本项目包含以下场景，用于实现三国杀地形策略游戏。

## ⚠️ 重要：首次使用必读

### 场景文件存在但是空的？

这是正常的！场景文件已创建，但需要先运行**场景设置向导**来生成UI内容。

### 🚀 如何生成场景内容（3分钟搞定）

```
1. 在Unity编辑器顶部菜单栏选择：
   三国策略 -> 场景设置向导

2. 点击大按钮：
   🚀 一键设置所有5个场景

3. 等待1-2分钟完成

4. 完成！现在场景有完整的UI了！
```

### 📖 详细说明

查看项目根目录的文档：
- `场景是空的怎么办.txt` - 快速解决方案
- `场景内容生成指南.md` - 详细说明

---

## 场景列表

### 1. MainMenu.unity（主菜单场景）
**功能：**
- 快速匹配按钮 - 自动匹配2-6人游戏
- 房间列表按钮 - 进入房间列表场景
- 玩家资料显示 - 等级、欢乐豆等信息
- 设置和退出功能

**主要脚本：**
- `MainMenuController.cs` - 主菜单逻辑控制
- `NetworkManager.cs` - 网络连接管理

**使用说明：**
- 游戏启动后的第一个场景
- 需要在GameObject上添加MainMenuController组件
- 需配置UI按钮和文本引用

---

### 2. RoomList.unity（房间列表场景）
**功能：**
- 显示所有可用房间
- 创建自定义房间
- 地形规则选择（赤壁水战、官渡之战、全随机等）
- 最大玩家数设置（2-6人）
- 房间筛选和刷新

**主要脚本：**
- `RoomListController.cs` - 房间列表逻辑
- `NetworkManager.cs` - 网络通信

**使用说明：**
- 从主菜单进入
- 可以创建房间或加入现有房间
- 创建房间时可选择地形包（固定地形或随机地形）

---

### 3. HeroSelection.unity（选将场景）
**功能：**
- 随机武将池展示（按职能分类）
  - 输出型（Attacker）：关羽、张飞、赵云等
  - 控制型（Controller）：诸葛亮、周瑜、司马懿等
  - 辅助型（Supporter）：华佗、蔡文姬、孙权等
  - 特殊型（Special）：貂蝉、曹操、刘备等
- 每个职能提供n个武将供选择（默认3个）
- 选将倒计时（默认10秒）
- 随机选择按钮
- 历史羁绊提示

**主要脚本：**
- `HeroSelectionController.cs` - 选将逻辑
- 包含武将数据结构和职能枚举

**游戏机制：**
- 每位玩家从每个职能中选择1名武将
- 总共需要选择4名武将（每个职能1名）
- 超时自动随机选择
- 支持"随机保护位"机制（可锁定1名本命武将）

---

### 4. GameScene.unity（游戏主场景）
**功能：**
- 12x12棋盘式地形系统
- 武将移动和战斗
- 手牌显示和卡牌打出
- 地形动态生成和效果
- 回合制战斗（最多15回合）
- 相机控制（移动、旋转、缩放）
- 技能联动系统
- 历史羁绊触发

**主要脚本：**
- `GameManager.cs` - 游戏总控制器
- `BoardManager.cs` - 棋盘管理
- `TerrainManager.cs` - 地形系统管理
- `CardManager.cs` - 卡牌管理
- `CameraController.cs` - 相机控制

**地形系统：**
1. **基础地形：**
   - 平原（Plain）
   - 山地（Mountain）- 增加远程攻击范围
   - 水域（Water）
   - 森林（Forest）- 火攻联动

2. **动态地形：**
   - 火焰（Fire）- 每回合造成伤害
   - 冰霜（Ice）- 减速效果
   - 毒沼（Poison）- 持续伤害
   - 堡垒（Fortress）- 防御加成
   - 祭坛（Altar）- 复活机制
   - 陷阱（Trap）- 触发伤害
   - 医庐（Heal）- 回复体力

**游戏流程：**
1. 地形生效阶段
2. 移动/交互地形阶段
3. 出牌阶段
4. 地形结算阶段

**胜利条件：**
- 占领敌方主城地形
- 击杀所有敌方武将
- 地形占领胜利（控制5个核心地块达3回合）
- 资源收集胜利（累计获得200粮草）

---

### 5. TerrainEditor.unity（地形编辑器场景）
**功能：**
- 自定义地形规则
- 地形包创建和保存
- 地形效果编辑
  - 地形名称和描述
  - 伤害值设置
  - 攻击/防御加成
  - 是否阻挡移动
- 地形包导入导出
- 预览地形布局

**主要脚本：**
- `TerrainEditorController.cs` - 编辑器逻辑

**使用说明：**
- 点击地形调色板选择地形类型
- 在棋盘上点击放置地形
- 配置地形效果参数
- 保存为地形包（存储在PlayerPrefs或Resources）
- 可在房间创建时选择自定义地形包

---

## 场景切换流程

```
MainMenu（主菜单）
    ├─> RoomList（房间列表）
    │       └─> HeroSelection（选将）
    │               └─> GameScene（游戏）
    │                       └─> MainMenu（返回）
    │
    ├─> HeroSelection（快速匹配）
    │       └─> GameScene（游戏）
    │
    └─> TerrainEditor（地形编辑器）
            └─> MainMenu（返回）
```

## 开发建议

### 测试流程
1. 从MainMenu场景开始测试
2. 验证网络连接功能
3. 测试房间创建和加入
4. 测试选将系统（随机武将池）
5. 测试游戏主场景的地形系统
6. 测试地形编辑器功能

### 注意事项
1. 所有场景都需要添加到Build Settings中
2. 场景中的脚本引用需要在Unity编辑器中正确配置
3. UI元素需要使用Canvas和EventSystem
4. 地形预制体需要配置在BoardManager中
5. 网络通信需要配置服务器地址

### 后续开发
- [ ] 添加音效和背景音乐
- [ ] 完善UI动画和过渡效果
- [ ] 实现武将技能系统
- [ ] 添加更多地形类型和效果
- [ ] 实现历史羁绊系统
- [ ] 添加教程系统
- [ ] 实现战报回放功能
- [ ] 添加排行榜和成就系统

## 资源需求

### 必需资源
1. **UI资源：**
   - 按钮素材
   - 背景图片
   - 武将头像
   - 卡牌图片
   - 地形图标

2. **3D模型：**
   - 武将模型
   - 地形特效
   - 技能特效

3. **音频：**
   - 背景音乐
   - 按钮音效
   - 技能音效
   - 环境音效

4. **插件：**
   - Steamworks.NET（Steam集成）
   - Newtonsoft.Json（JSON序列化）
   - TextMeshPro（文本渲染）

---

**最后更新：** 2025年10月20日
**Unity版本：** 2021.3 LTS或更高

